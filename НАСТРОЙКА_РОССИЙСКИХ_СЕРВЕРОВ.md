# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –¥–ª—è —Ä–∞–±–æ—Ç—ã –Ω–∞ —Ä–æ—Å—Å–∏–π—Å–∫–∏—Ö —Å–µ—Ä–≤–µ—Ä–∞—Ö

## ‚úÖ –ß—Ç–æ –∏–∑–º–µ–Ω–µ–Ω–æ

### 1. –†–æ—Å—Å–∏–π—Å–∫–∏–µ STUN —Å–µ—Ä–≤–µ—Ä—ã
- –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç –æ—Ç–¥–∞–Ω —Ä–æ—Å—Å–∏–π—Å–∫–∏–º STUN —Å–µ—Ä–≤–µ—Ä–∞–º
- –£–±—Ä–∞–Ω—ã –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ –∏–Ω–æ—Å—Ç—Ä–∞–Ω–Ω—ã—Ö —Å–µ—Ä–≤–µ—Ä–æ–≤
- –û—Å—Ç–∞–≤–ª–µ–Ω—ã —Ç–æ–ª—å–∫–æ —Å–∞–º—ã–µ —Å—Ç–∞–±–∏–ª—å–Ω—ã–µ

### 2. –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –æ—Ç–∫–ª—é—á–∏—Ç—å WebRTC
- –ú–æ–∂–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å —Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ signaling —Å–µ—Ä–≤–µ—Ä
- –≠—Ç–æ –±–æ–ª–µ–µ —Å—Ç–∞–±–∏–ª—å–Ω–æ –¥–ª—è —Ä–æ—Å—Å–∏–π—Å–∫–∏—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- –ù–µ—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç STUN/TURN —Å–µ—Ä–≤–µ—Ä–æ–≤

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞

### –í–∞—Ä–∏–∞–Ω—Ç 1: –¢–æ–ª—å–∫–æ signaling (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–ª—è –†–æ—Å—Å–∏–∏)

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env` –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞:

```env
VITE_SIGNALING_URL=wss://–≤–∞—à-—Ä–æ—Å—Å–∏–π—Å–∫–∏–π-–¥–æ–º–µ–Ω.ru
VITE_USE_WEBRTC=false
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å
- –ù–µ—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç STUN/TURN
- –í—Å–µ —Å–æ–æ–±—â–µ–Ω–∏—è –∏–¥—É—Ç —á–µ—Ä–µ–∑ –≤–∞—à —Å–µ—Ä–≤–µ—Ä
- –ë—ã—Å—Ç—Ä–∞—è —Ä–∞–±–æ—Ç–∞

**–ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏:**
- –ù–∞–≥—Ä—É–∑–∫–∞ –Ω–∞ –≤–∞—à —Å–µ—Ä–≤–µ—Ä (–≤—Å–µ —Å–æ–æ–±—â–µ–Ω–∏—è –ø—Ä–æ—Ö–æ–¥—è—Ç —á–µ—Ä–µ–∑ –Ω–µ–≥–æ)
- –î–ª—è –±–æ–ª—å—à–∏—Ö –≥—Ä—É–ø–ø –Ω—É–∂–µ–Ω –º–æ—â–Ω—ã–π —Å–µ—Ä–≤–µ—Ä

### –í–∞—Ä–∏–∞–Ω—Ç 2: WebRTC —Å —Ä–æ—Å—Å–∏–π—Å–∫–∏–º–∏ STUN —Å–µ—Ä–≤–µ—Ä–∞–º–∏

```env
VITE_SIGNALING_URL=wss://–≤–∞—à-—Ä–æ—Å—Å–∏–π—Å–∫–∏–π-–¥–æ–º–µ–Ω.ru
VITE_USE_WEBRTC=true
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- –ú–µ–Ω—å—à–µ –Ω–∞–≥—Ä—É–∑–∫–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä (peer-to-peer)
- –ë—ã—Å—Ç—Ä–µ–µ –¥–ª—è –ø—Ä—è–º—ã—Ö —á–∞—Ç–æ–≤

**–ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏:**
- –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –æ—Ç STUN —Å–µ—Ä–≤–µ—Ä–æ–≤
- –ú–æ–∂–µ—Ç –Ω–µ —Ä–∞–±–æ—Ç–∞—Ç—å –Ω–∞ —Å—Ç—Ä–æ–≥–∏—Ö NAT

### –í–∞—Ä–∏–∞–Ω—Ç 3: –° —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–º TURN —Å–µ—Ä–≤–µ—Ä–æ–º (–ª—É—á—à–∏–π –≤–∞—Ä–∏–∞–Ω—Ç)

```env
VITE_SIGNALING_URL=wss://–≤–∞—à-—Ä–æ—Å—Å–∏–π—Å–∫–∏–π-–¥–æ–º–µ–Ω.ru
VITE_USE_WEBRTC=true
VITE_TURN_URL=turn:–≤–∞—à-–¥–æ–º–µ–Ω.ru:3478
VITE_TURN_USER=–≤–∞—à-–ª–æ–≥–∏–Ω
VITE_TURN_PASS=–≤–∞—à-–ø–∞—Ä–æ–ª—å
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å
- –†–∞–±–æ—Ç–∞–µ—Ç –≤–µ–∑–¥–µ
- –ö–æ–Ω—Ç—Ä–æ–ª—å –Ω–∞–¥ —Å–µ—Ä–≤–µ—Ä–æ–º

## üìã –ü–æ—à–∞–≥–æ–≤–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è

### 1. –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –Ω–∞ —Ä–æ—Å—Å–∏–π—Å–∫–æ–º —Ö–æ—Å—Ç–∏–Ω–≥–µ

–°–º. —Ñ–∞–π–ª `–†–û–°–°–ò–ô–°–ö–ò–ï_–•–û–°–¢–ò–ù–ì–ò.md` –¥–ª—è –ø–æ–¥—Ä–æ–±–Ω—ã—Ö –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π.

**–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ —Ö–æ—Å—Ç–∏–Ω–≥–∏:**
- Timeweb (–æ—Ç 200‚ÇΩ/–º–µ—Å—è—Ü)
- Selectel (–æ—Ç 300‚ÇΩ/–º–µ—Å—è—Ü)
- REG.RU (–æ—Ç 250‚ÇΩ/–º–µ—Å—è—Ü)
- Beget (–æ—Ç 200‚ÇΩ/–º–µ—Å—è—Ü)

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

**–î–ª—è Netlify/Vercel:**
1. –û—Ç–∫—Ä–æ–π—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–æ–µ–∫—Ç–∞
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ "Environment Variables"
3. –î–æ–±–∞–≤—å—Ç–µ:
   - `VITE_SIGNALING_URL` = `wss://–≤–∞—à-–¥–æ–º–µ–Ω.ru`
   - `VITE_USE_WEBRTC` = `false` (–∏–ª–∏ `true`)

**–î–ª—è —Å—Ç–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —Ö–æ—Å—Ç–∏–Ω–≥–∞:**
1. –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env` –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞
2. –î–æ–±–∞–≤—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ (—Å–º. –≤—ã—à–µ)
3. –ü–µ—Ä–µ—Å–æ–±–µ—Ä–∏—Ç–µ –ø—Ä–æ–µ–∫—Ç: `npm run build`

### 3. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ TURN —Å–µ—Ä–≤–µ—Ä–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

–ï—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ WebRTC, —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å —Å–≤–æ–π TURN —Å–µ—Ä–≤–µ—Ä:

1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ coturn –Ω–∞ VPS:
   ```bash
   sudo apt-get install coturn
   ```

2. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ `/etc/turnserver.conf`:
   ```
   listening-port=3478
   external-ip=–í–ê–®_IP_–°–ï–†–í–ï–†–ê
   realm=–≤–∞—à-–¥–æ–º–µ–Ω.ru
   user=stork:–ø–∞—Ä–æ–ª—å
   ```

3. –ó–∞–ø—É—Å—Ç–∏—Ç–µ:
   ```bash
   sudo systemctl enable coturn
   sudo systemctl start coturn
   ```

4. –î–æ–±–∞–≤—å—Ç–µ –≤ `.env`:
   ```
   VITE_TURN_URL=turn:–≤–∞—à-–¥–æ–º–µ–Ω.ru:3478
   VITE_TURN_USER=stork
   VITE_TURN_PASS=–ø–∞—Ä–æ–ª—å
   ```

## üöÄ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### –î–ª—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏:
1. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ä–æ—Å—Å–∏–π—Å–∫–∏–π —Ö–æ—Å—Ç–∏–Ω–≥
2. –û—Ç–∫–ª—é—á–∏—Ç–µ WebRTC (`VITE_USE_WEBRTC=false`)
3. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ç–æ–ª—å–∫–æ signaling —Å–µ—Ä–≤–µ—Ä
4. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ SSL (Let's Encrypt)

### –î–ª—è –ª—É—á—à–µ–π –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏:
1. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ä–æ—Å—Å–∏–π—Å–∫–∏–π —Ö–æ—Å—Ç–∏–Ω–≥
2. –í–∫–ª—é—á–∏—Ç–µ WebRTC (`VITE_USE_WEBRTC=true`)
3. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ —Å–≤–æ–π TURN —Å–µ—Ä–≤–µ—Ä
4. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ CDN –¥–ª—è —Å—Ç–∞—Ç–∏–∫–∏

## üìä –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤

| –í–∞—Ä–∏–∞–Ω—Ç | –°—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å | –°–∫–æ—Ä–æ—Å—Ç—å | –ù–∞–≥—Ä—É–∑–∫–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä | –°–ª–æ–∂–Ω–æ—Å—Ç—å |
|---------|--------------|----------|-------------------|-----------|
| –¢–æ–ª—å–∫–æ signaling | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê | ‚≠ê‚≠ê‚≠ê‚≠ê | ‚≠ê‚≠ê‚≠ê | ‚≠ê‚≠ê |
| WebRTC + STUN | ‚≠ê‚≠ê‚≠ê | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê | ‚≠ê |
| WebRTC + TURN | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê | ‚≠ê‚≠ê‚≠ê‚≠ê | ‚≠ê‚≠ê‚≠ê |

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã

1. –û—Ç–∫—Ä–æ–π—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ (F12)
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏—è:
   - `P2P Service initialized, Peer ID: ... (Signaling only)` - –µ—Å–ª–∏ WebRTC –æ—Ç–∫–ª—é—á–µ–Ω
   - `P2P Service initialized, Peer ID: ... (WebRTC + Signaling)` - –µ—Å–ª–∏ WebRTC –≤–∫–ª—é—á–µ–Ω
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ:
   - WebSocket —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ
   - –°–æ–æ–±—â–µ–Ω–∏—è –¥–æ–ª–∂–Ω—ã –¥–æ—Å—Ç–∞–≤–ª—è—Ç—å—Å—è

## ‚ùì –ß–∞—Å—Ç—ã–µ –≤–æ–ø—Ä–æ—Å—ã

**Q: –ö–∞–∫–æ–π –≤–∞—Ä–∏–∞–Ω—Ç –≤—ã–±—Ä–∞—Ç—å?**
A: –î–ª—è –Ω–∞—á–∞–ª–∞ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ "–¢–æ–ª—å–∫–æ signaling" - —ç—Ç–æ —Å–∞–º—ã–π –ø—Ä–æ—Å—Ç–æ–π –∏ —Å—Ç–∞–±–∏–ª—å–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç.

**Q: –ù—É–∂–µ–Ω –ª–∏ TURN —Å–µ—Ä–≤–µ—Ä?**
A: –¢–æ–ª—å–∫–æ –µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ WebRTC –∏ –µ—Å—Ç—å –ø—Ä–æ–±–ª–µ–º—ã —Å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ–º. –î–ª—è "—Ç–æ–ª—å–∫–æ signaling" –Ω–µ –Ω—É–∂–µ–Ω.

**Q: –ú–æ–∂–Ω–æ –ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –±–µ—Å–ø–ª–∞—Ç–Ω—ã–π —Ö–æ—Å—Ç–∏–Ω–≥?**
A: –î–ª—è signaling —Å–µ—Ä–≤–µ—Ä–∞ –Ω—É–∂–µ–Ω VPS (–æ—Ç 200‚ÇΩ/–º–µ—Å—è—Ü). –î–ª—è —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –±–µ—Å–ø–ª–∞—Ç–Ω—ã–π —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π —Ö–æ—Å—Ç–∏–Ω–≥.

**Q: –ë—É–¥–µ—Ç –ª–∏ —Ä–∞–±–æ—Ç–∞—Ç—å –±–µ–∑ —Ä–æ—Å—Å–∏–π—Å–∫–æ–≥–æ —Ö–æ—Å—Ç–∏–Ω–≥–∞?**
A: –î–∞, –Ω–æ –º–æ–≥—É—Ç –±—ã—Ç—å –∑–∞–¥–µ—Ä–∂–∫–∏ –∏ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏. –†–æ—Å—Å–∏–π—Å–∫–∏–π —Ö–æ—Å—Ç–∏–Ω–≥ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–ª—è –ª—É—á—à–µ–π —Ä–∞–±–æ—Ç—ã.
