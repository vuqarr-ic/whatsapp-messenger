# üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç: –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –Ω–∞ —Ä–æ—Å—Å–∏–π—Å–∫–æ–º —Ö–æ—Å—Ç–∏–Ω–≥–µ

## –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è (5 –º–∏–Ω—É—Ç)

### 1. –°–æ–∑–¥–∞–π—Ç–µ VPS –Ω–∞ Timeweb
- –ó–∞–π–¥–∏—Ç–µ –Ω–∞ https://timeweb.com
- –°–æ–∑–¥–∞–π—Ç–µ VPS: Ubuntu 22.04, 1 CPU, 1GB RAM
- –ó–∞–ø–∏—à–∏—Ç–µ IP –∏ –ø–∞—Ä–æ–ª—å

### 2. –ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ —Å–µ—Ä–≤–µ—Ä—É

**Windows (PuTTY):**
- –°–∫–∞—á–∞–π—Ç–µ PuTTY
- –ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å: IP –∞–¥—Ä–µ—Å, –ø–æ—Ä—Ç 22, SSH
- –õ–æ–≥–∏–Ω: `root`, –ø–∞—Ä–æ–ª—å: –≤–∞—à –ø–∞—Ä–æ–ª—å

**Mac/Linux:**
```bash
ssh root@–í–ê–®_IP
```

### 3. –í—ã–ø–æ–ª–Ω–∏—Ç–µ –∫–æ–º–∞–Ω–¥—ã –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

```bash
# –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã
apt update && apt upgrade -y

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Node.js
curl -fsSL https://deb.nodesource.com/setup_20.x | bash -
apt-get install -y nodejs

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Git –∏ Nginx
apt-get install -y git nginx

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ PM2
npm install -g pm2

# –ó–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞ (–∑–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ –≤–∞—à —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π)
cd /root
git clone https://github.com/–í–ê–®_–ù–ò–ö/stork-messenger.git
cd stork-messenger

# –ò–ª–∏ –∑–∞–≥—Ä—É–∑–∏—Ç–µ —Ñ–∞–π–ª—ã —á–µ—Ä–µ–∑ SCP (—Å–º. –ø–æ–ª–Ω—É—é –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—é)

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
npm install

# –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞
cd server
pm2 start index.js --name stork-signaling
pm2 save
pm2 startup  # –í—ã–ø–æ–ª–Ω–∏—Ç–µ –∫–æ–º–∞–Ω–¥—É, –∫–æ—Ç–æ—Ä—É—é –ø–æ–∫–∞–∂–µ—Ç PM2
```

### 4. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ Nginx

```bash
# –°–æ–∑–¥–∞–π—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
nano /etc/nginx/sites-available/stork
```

–í—Å—Ç–∞–≤—å—Ç–µ (–∑–∞–º–µ–Ω–∏—Ç–µ `–í–ê–®_–î–û–ú–ï–ù.ru`):

```nginx
map $http_upgrade $connection_upgrade {
    default upgrade;
    '' close;
}

server {
    listen 80;
    server_name –í–ê–®_–î–û–ú–ï–ù.ru;

    location / {
        proxy_pass http://localhost:3005;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection $connection_upgrade;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
    }
}
```

–°–æ—Ö—Ä–∞–Ω–∏—Ç–µ (`Ctrl+O`, `Enter`, `Ctrl+X`), –∑–∞—Ç–µ–º:

```bash
ln -s /etc/nginx/sites-available/stork /etc/nginx/sites-enabled/
rm /etc/nginx/sites-enabled/default
nginx -t
systemctl restart nginx
```

### 5. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –¥–æ–º–µ–Ω –∏ SSL

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Certbot
apt-get install -y certbot python3-certbot-nginx

# –ü–æ–ª—É—á–∏—Ç–µ SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç
certbot --nginx -d –í–ê–®_–î–û–ú–ï–ù.ru
```

### 6. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥

**–í–∞—Ä–∏–∞–Ω—Ç A: –ù–∞ —Ç–æ–º –∂–µ —Å–µ—Ä–≤–µ—Ä–µ**

```bash
cd /root/stork-messenger
nano .env
```

–î–æ–±–∞–≤—å—Ç–µ:
```env
VITE_SIGNALING_URL=wss://–í–ê–®_–î–û–ú–ï–ù.ru
VITE_USE_WEBRTC=false
```

```bash
npm run build
```

–ù–∞—Å—Ç—Ä–æ–π—Ç–µ Nginx –¥–ª—è —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞ (—Å–º. `nginx-frontend.conf`)

**–í–∞—Ä–∏–∞–Ω—Ç B: –ù–∞ Netlify/Vercel**

1. –°–æ–±–µ—Ä–∏—Ç–µ –ø—Ä–æ–µ–∫—Ç: `npm run build`
2. –ó–∞–≥—Ä—É–∑–∏—Ç–µ –ø–∞–ø–∫—É `dist` –Ω–∞ Netlify/Vercel
3. –î–æ–±–∞–≤—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:
   - `VITE_SIGNALING_URL` = `wss://–≤–∞—à-–¥–æ–º–µ–Ω.ru`
   - `VITE_USE_WEBRTC` = `false`

### 7. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–±–æ—Ç—É

1. –û—Ç–∫—Ä–æ–π—Ç–µ –≤–∞—à —Å–∞–π—Ç –≤ –±—Ä–∞—É–∑–µ—Ä–µ
2. –û—Ç–∫—Ä–æ–π—Ç–µ –∫–æ–Ω—Å–æ–ª—å (F12)
3. –î–æ–ª–∂–Ω–æ –±—ã—Ç—å: `P2P Service initialized`

---

## üìã –ß–µ–∫–ª–∏—Å—Ç

- [ ] VPS —Å–æ–∑–¥–∞–Ω
- [ ] Node.js —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
- [ ] –ö–æ–¥ –∑–∞–≥—Ä—É–∂–µ–Ω
- [ ] –°–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω (PM2)
- [ ] Nginx –Ω–∞—Å—Ç—Ä–æ–µ–Ω
- [ ] –î–æ–º–µ–Ω –Ω–∞—Å—Ç—Ä–æ–µ–Ω
- [ ] SSL —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
- [ ] –§—Ä–æ–Ω—Ç–µ–Ω–¥ —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç
- [ ] –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã

---

## üÜò –ü—Ä–æ–±–ª–µ–º—ã?

**–°–µ—Ä–≤–µ—Ä –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è:**
```bash
pm2 logs stork-signaling
```

**WebSocket –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
```bash
nginx -t  # –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
tail -f /var/log/nginx/error.log  # –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
```

**–ü–æ—Ä—Ç –∑–∞–Ω—è—Ç:**
–ò–∑–º–µ–Ω–∏—Ç–µ –ø–æ—Ä—Ç –≤ `server/index.js` –∏–ª–∏ —á–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é:
```bash
PORT=3006 pm2 restart stork-signaling
```

---

## üìö –ü–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è

–°–º. —Ñ–∞–π–ª `–†–ê–ó–í–ï–†–¢–´–í–ê–ù–ò–ï_–ù–ê_–†–û–°–°–ò–ô–°–ö–û–ú_–•–û–°–¢–ò–ù–ì–ï.md` –¥–ª—è –¥–µ—Ç–∞–ª—å–Ω–æ–π –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏.
